# 🎮 Rust 扫雷游戏

一个使用 Rust 语言开发的功能完整的扫雷游戏，专为学习和掌握 Rust 核心语法特性而设计，为了不让项目过于复杂，采用了命令行界面（CLI）形式，提供了完整的游戏逻辑和交互式演示系统。

### 🎯 核心特性
- **完整的游戏逻辑**: 地雷随机分布、自动揭示、状态管理
- **多难度支持**: 简单、中等、困难三种预设难度
- **功能演示**: 交互式功能演示
- **模块化架构**: 清晰的代码组织和职责分离
- **全面测试覆盖**: 单元测试和集成测试
- **命令行界面**: 友好的用户交互体验

## 🚀 快速开始

### 环境要求
- **Rust**: 1.70+ (2024 edition)
- **Cargo**: 包管理器

### 安装和运行

```bash
# 克隆项目
git clone <repository-url>
cd minesweeper_game

# 直接运行游戏
cargo run

# 编译优化版本
cargo build --release

# 运行测试套件
cargo test

# 查看测试详情
cargo test -- --nocapture
```

## 🎯 游戏模式

### 难度设置
| 难度 | 棋盘大小 | 地雷数量 | 地雷密度 |
|------|----------|----------|----------|
| 简单 | 9×9      | 10个     | 12.3%    |
| 中等 | 16×16    | 40个     | 15.6%    |
| 困难 | 30×16    | 99个     | 20.6%    |

### 演示模式
🔍 **交互式教学系统** - 完整功能演示：
- **棋盘初始化演示** - 游戏配置与地雷密度计算
- **首次点击机制** - 安全的地雷生成算法
- **自动揭示算法** - 自动空白区域展开
- **标记系统** - 右键标记与取消标记
- **游戏状态检测** - 胜负条件判定演示
- **边界条件测试** - 错误处理和特殊情况

## 🏗️ 项目架构

### 📁 模块组织

```
src/
├── main.rs              # 程序入口点
├── lib.rs               # 库配置和API导出
├── app.rs               # CLI应用逻辑
├── demo.rs              # 演示功能模块
├── config/              # 配置管理
│   ├── constants.rs     # 游戏常量和显示文本
│   ├── difficulty.rs    # 难度配置
│   └── mod.rs
├── core/                # 核心游戏引擎
│   ├── board.rs         # 棋盘管理和操作
│   ├── cell.rs          # 格子状态和逻辑
│   ├── game.rs          # 游戏主控制器
│   └── mod.rs
└── tests/               # 测试套件
    ├── board_tests.rs   # 棋盘功能测试
    ├── cell_tests.rs    # 格子状态测试
    ├── game_flow_tests.rs # 游戏流程测试
    ├── auto_reveal_tests.rs # 自动揭示功能测试
    └── mod.rs
```

## 🎮 游戏操作

### 基本命令
- `reveal x y` - 揭示指定坐标的格子
- `flag x y` - 标记/取消标记地雷
- `quit` - 退出游戏

### 游戏规则
- **目标**: 揭示所有非地雷格子
- **失败**: 点击到地雷
- **提示**: 数字显示相邻地雷数量
- **标记**: 用旗帜标记可疑位置

## 🧪 测试体系

### 测试覆盖

```bash
# 运行所有测试
cargo test

# 运行特定模块测试
cargo test board_tests
cargo test auto_reveal
cargo test game_flow

# 集成测试
cargo test --test integration_tests
```

### 测试内容
- ✅ **棋盘初始化** - 地雷分布和配置验证
- ✅ **格子状态** - 状态转换和边界条件
- ✅ **自动揭示** - 递归算法正确性
- ✅ **游戏流程** - 胜负判定和状态管理
- ✅ **边界处理** - 异常输入和错误恢复
- ✅ **集成测试** - 端到端功能验证

